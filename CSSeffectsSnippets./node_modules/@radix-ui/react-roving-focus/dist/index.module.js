import{useControllableState as e}from"@radix-ui/react-use-controllable-state";import{useCallbackRef as t}from"@radix-ui/react-use-callback-ref";import{Primitive as r}from"@radix-ui/react-primitive";import{useId as o}from"@radix-ui/react-id";import{createContext as n}from"@radix-ui/react-context";import{useComposedRefs as i}from"@radix-ui/react-compose-refs";import{createCollection as a}from"@radix-ui/react-collection";import{composeEventHandlers as c}from"@radix-ui/primitive";import*as u from"react";import s from"@babel/runtime/helpers/esm/extends";const f={bubbles:!1,cancelable:!0},[l,m,p]=a(),d="span",[v,g]=n("RovingFocusGroup");export const RovingFocusGroup=/*#__PURE__*/u.forwardRef(((e,t)=>/*#__PURE__*/u.createElement(l,null,/*#__PURE__*/u.createElement(b,s({},e,{ref:t})))));/*#__PURE__*/const b=/*#__PURE__*/u.forwardRef(((o,n)=>{const{as:a=d,orientation:l,dir:m="ltr",loop:g=!1,currentTabStopId:b,defaultCurrentTabStopId:w,onCurrentTabStopIdChange:x,onEntryFocus:E,...I}=o,R=u.useRef(null),h=i(n,R),[T=null,A]=e({prop:b,defaultProp:w,onChange:x}),[y,D]=u.useState(!1),S=t(E),{getItems:C}=p();return u.useEffect((()=>{const e=R.current;if(e)return e.addEventListener("rovingFocusGroup.onEntryFocus",S),()=>e.removeEventListener("rovingFocusGroup.onEntryFocus",S)}),[S]),/*#__PURE__*/u.createElement(v,{orientation:l,dir:m,loop:g,currentTabStopId:T,onItemFocus:u.useCallback((e=>A(e)),[A]),onItemShiftTab:u.useCallback((()=>D(!0)),[])},/*#__PURE__*/u.createElement(r,s({tabIndex:y?-1:0,"aria-orientation":l,"data-orientation":l},I,{as:a,ref:h,onFocus:c(o.onFocus,(e=>{if(e.target===e.currentTarget&&!y){const t=new Event("rovingFocusGroup.onEntryFocus",f);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=C().filter((e=>e.focusable));F([e.find((e=>e.active)),e.find((e=>e.id===T)),...e].filter(Boolean).map((e=>e.ref.current)))}}})),onBlur:c(o.onBlur,(()=>D(!1)))})))})),w="span";export const RovingFocusItem=/*#__PURE__*/u.forwardRef(((e,t)=>{const{as:n=w,focusable:i=!0,active:a=!1,...f}=e,l=o(),d=g("RovingFocusItem"),v=d.currentTabStopId===l,{getItems:b}=p();/*#__PURE__*/return u.createElement(m,{id:l,focusable:i,active:a},/*#__PURE__*/u.createElement(r,s({tabIndex:v?0:-1,"data-orientation":d.orientation},f,{as:n,ref:t,onMouseDown:c(e.onMouseDown,(e=>{i||e.preventDefault()})),onFocus:c(e.onFocus,(()=>d.onItemFocus(l))),onKeyDown:c(e.onKeyDown,(e=>{if("Tab"===e.key&&e.shiftKey)return void d.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,r){const o=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,r);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(o)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(o)?void 0:x[o]}(e,d.orientation,d.dir);if(void 0!==t){e.preventDefault();let n=b().filter((e=>e.focusable)).map((e=>e.ref.current));if("last"===t)n.reverse();else if("prev"===t||"next"===t){"prev"===t&&n.reverse();const i=n.indexOf(e.currentTarget);n=d.loop?(o=i+1,(r=n).map(((e,t)=>r[(o+t)%r.length]))):n.slice(i+1)}setTimeout((()=>F(n)))}var r,o}))})))}));/*#__PURE__*/const x={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function F(e){const t=document.activeElement;for(const r of e){if(r===t)return;if(r.focus(),document.activeElement!==t)return}}export const Root=RovingFocusGroup;export const Item=RovingFocusItem;
//# sourceMappingURL=index.module.js.map
