{"mappings":"IAAgCA,sGAAAA,qBAClBA,EAAEC,WAAaD,EAAEE,QAAUF,2BCKzC,WAWE,MAAMG,eAAUC,EAAMC,cAA4B,IAI5CC,eAAiBF,EAAMG,YAAyC,CAACC,EAAOC,KAC5E,MAAMC,SAAEA,GAAaF,EACfG,EAAMP,EAAMQ,OAA0B,MACtCC,EAAeC,EAAgBL,EAAcE,GAC7CI,EAAUX,EAAMQ,OAAgC,IAAII,KAAOC,qBACjE,OACEC,EAAAC,cAAChB,EAAQiB,SAAT,CAAkBC,MAAOjB,EAAMkB,SAAQ,KAAA,CAASP,QAAAA,EAASQ,cAAeZ,KAAQ,CAACI,kBAC/EG,EAAAC,cAACK,EAAD,CAAMb,IAAKE,GAAeH,OAY1Be,EAAiB,6BAIjBC,eAAqBtB,EAAMG,YAC/B,CAACC,EAAOC,KACN,MAAMC,SAAEA,KAAaiB,GAAanB,EAC5BG,EAAMP,EAAMQ,OAAoB,MAChCC,EAAeC,EAAgBL,EAAcE,GAC7CiB,EAAUxB,EAAMyB,WAAW1B,GAOjC,OALAC,EAAM0B,WAAU,KACdF,EAAQb,QAAQgB,IAAIpB,EAAK,CAAEA,IAAAA,KAAUgB,IAC9B,KAAWC,EAAQb,QAAQiB,OAAOrB,oBAIzCO,EAAAC,cAACK,EAAD,CAAYS,CAACR,GAAiB,GAAMd,IAAKE,GACtCH,MA4BT,MAAO,CAACJ,EAAgBoB,EAhBxB,WACE,MAAME,EAAUxB,EAAMyB,WAAW1B,GACjC,MAAO,CACL+B,WACE,MAAMC,EAAeC,MAAMC,KACzBT,EAAQL,cAAcN,QAASqB,iBAAkB,IAAGb,OAMtD,OAJcW,MAAMC,KAAKT,EAAQb,QAAQwB,UACdC,MACzB,CAACxC,EAAGyC,IAAMN,EAAaO,QAAQ1C,EAAEW,IAAIM,SAAYkB,EAAaO,QAAQD,EAAE9B,IAAIM","sources":["./node_modules/@parcel/scope-hoisting/lib/helpers.js","./packages/react/collection/src/Collection.tsx"],"sourcesContent":["function $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\n\nfunction $parcel$defineInteropFlag(a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n}\n\nfunction $parcel$reexport(e, n, v) {\n  Object.defineProperty(e, n, {get: v, enumerable: true});\n}\n\nfunction $parcel$exportWildcard(dest, source) {\n  Object.keys(source).forEach(function(key) {\n    if (key === 'default' || key === '__esModule') {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function get() {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n}\n\nfunction $parcel$missingModule(name) {\n  var err = new Error(\"Cannot find module '\" + name + \"'\");\n  err.code = 'MODULE_NOT_FOUND';\n  throw err;\n}\n\nvar $parcel$global =\n  typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof self !== 'undefined'\n    ? self\n    : typeof window !== 'undefined'\n    ? window\n    : typeof global !== 'undefined'\n    ? global\n    : {};\n","import React from 'react';\nimport { useComposedRefs } from '@radix-ui/react-compose-refs';\nimport { Slot } from '@radix-ui/react-slot';\n\ntype SlotProps = React.ComponentProps<typeof Slot>;\n\nfunction createCollection<ItemElement extends HTMLElement, ItemData>() {\n  /* -----------------------------------------------------------------------------------------------\n   * Collection\n   * ---------------------------------------------------------------------------------------------*/\n\n  type CollectionElement = HTMLElement;\n\n  type ContextValue = {\n    collectionRef: React.RefObject<CollectionElement>;\n    itemMap: Map<React.RefObject<ItemElement>, { ref: React.RefObject<ItemElement> } & ItemData>;\n  };\n  const Context = React.createContext<ContextValue>({} as any);\n\n  const COLLECTION_SLOT_NAME = 'CollectionSlot';\n\n  const CollectionSlot = React.forwardRef<CollectionElement, SlotProps>((props, forwardedRef) => {\n    const { children } = props;\n    const ref = React.useRef<CollectionElement>(null);\n    const composedRefs = useComposedRefs(forwardedRef, ref);\n    const itemMap = React.useRef<ContextValue['itemMap']>(new Map()).current;\n    return (\n      <Context.Provider value={React.useMemo(() => ({ itemMap, collectionRef: ref }), [itemMap])}>\n        <Slot ref={composedRefs}>{children}</Slot>\n      </Context.Provider>\n    );\n  });\n\n  CollectionSlot.displayName = COLLECTION_SLOT_NAME;\n\n  /* -----------------------------------------------------------------------------------------------\n   * CollectionItem\n   * ---------------------------------------------------------------------------------------------*/\n\n  const ITEM_SLOT_NAME = 'CollectionItemSlot';\n  const ITEM_DATA_ATTR = 'data-radix-collection-item';\n\n  type CollectionItemSlotProps = { children: React.ReactNode } & ItemData;\n\n  const CollectionItemSlot = React.forwardRef<ItemElement, CollectionItemSlotProps>(\n    (props, forwardedRef) => {\n      const { children, ...itemData } = props;\n      const ref = React.useRef<ItemElement>(null);\n      const composedRefs = useComposedRefs(forwardedRef, ref);\n      const context = React.useContext(Context);\n\n      React.useEffect(() => {\n        context.itemMap.set(ref, { ref, ...((itemData as unknown) as ItemData) });\n        return () => void context.itemMap.delete(ref);\n      });\n\n      return (\n        <Slot {...{ [ITEM_DATA_ATTR]: '' }} ref={composedRefs}>\n          {children}\n        </Slot>\n      );\n    }\n  );\n\n  CollectionItemSlot.displayName = ITEM_SLOT_NAME;\n\n  /* -----------------------------------------------------------------------------------------------\n   * useCollection\n   * ---------------------------------------------------------------------------------------------*/\n\n  function useCollection() {\n    const context = React.useContext(Context);\n    return {\n      getItems() {\n        const orderedNodes = Array.from(\n          context.collectionRef.current!.querySelectorAll(`[${ITEM_DATA_ATTR}]`)\n        );\n        const items = Array.from(context.itemMap.values());\n        const orderedItems = items.sort(\n          (a, b) => orderedNodes.indexOf(a.ref.current!) - orderedNodes.indexOf(b.ref.current!)\n        );\n        return orderedItems;\n      },\n    };\n  }\n\n  return [CollectionSlot, CollectionItemSlot, useCollection] as const;\n}\n\nexport { createCollection };\n"],"names":["a","__esModule","default","Context","React","createContext","CollectionSlot","forwardRef","props","forwardedRef","children","ref","useRef","composedRefs","useComposedRefs","itemMap","Map","current","_react","createElement","Provider","value","useMemo","collectionRef","Slot","ITEM_DATA_ATTR","CollectionItemSlot","itemData","context","useContext","useEffect","set","delete","[object Object]","getItems","orderedNodes","Array","from","querySelectorAll","values","sort","b","indexOf"],"version":3,"file":"index.js.map"}